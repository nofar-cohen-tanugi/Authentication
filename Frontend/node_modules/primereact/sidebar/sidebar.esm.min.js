import*as e from"react";import n,{PrimeReactContext as t,localeOption as r}from"primereact/api";import{ComponentBase as i,useHandleStyle as o}from"primereact/componentbase";import{CSSTransition as a}from"primereact/csstransition";import{useEventListener as s,useMountEffect as l,useUpdateEffect as p,useUnmountEffect as c}from"primereact/hooks";import{TimesIcon as d}from"primereact/icons/times";import{Portal as u}from"primereact/portal";import{Ripple as b}from"primereact/ripple";import{classNames as m,DomHandler as f,ObjectUtils as v,ZIndexUtils as h,mergeProps as y,IconUtils as g}from"primereact/utils";function x(){return x=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},x.apply(this,arguments)}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(e,n){if("object"!==w(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function E(e){var n=S(e,"string");return"symbol"===w(n)?n:String(n)}function O(e){if(Array.isArray(e))return e}function k(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,s=[],l=!0,p=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==n);l=!0);}catch(e){p=!0,i=e}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(p)throw i}}return s}}function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function I(e,n){if(e){if("string"==typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(e,n):void 0}}function P(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,n){return O(e)||k(e,n)||I(e,n)||P()}var N=i.extend({defaultProps:{__TYPE:"Sidebar",id:null,style:null,className:null,maskStyle:null,maskClassName:null,visible:!1,position:"left",fullScreen:!1,blockScroll:!1,baseZIndex:0,dismissable:!0,showCloseIcon:!0,closeIcon:null,ariaCloseLabel:null,closeOnEscape:!0,icons:null,modal:!0,appendTo:null,transitionOptions:null,onShow:null,onHide:null,children:void 0},css:{classes:{closeButton:"p-sidebar-close p-sidebar-icon p-link",closeIcon:"p-sidebar-close-icon",mask:function(e){var n=e.props,t=e.maskVisibleState,r=["left","right","top","bottom"].find((function(e){return e===n.position}));return m("p-sidebar-mask",r?"p-sidebar-".concat(r):"",{"p-component-overlay p-component-overlay-enter":n.modal,"p-sidebar-mask-scrollblocker":n.blockScroll,"p-sidebar-visible":t,"p-sidebar-full":n.fullScreen},n.maskClassName)},header:function(e){return m("p-sidebar-header",{"p-sidebar-custom-header":e.props.header})},content:"p-sidebar-content",icons:"p-sidebar-icons",root:function(e){var t=e.context;return m("p-sidebar p-component",e.props.className,{"p-input-filled":t&&"filled"===t.inputStyle||"filled"===n.inputStyle,"p-ripple-disabled":t&&!1===t.ripple||!1===n.ripple})},transition:"p-sidebar"},styles:"\n@layer primereact {\n    .p-sidebar-mask {\n        display: none;\n        justify-content: center;\n        align-items: center;\n        pointer-events: none;\n        background-color: transparent;\n        transition-property: background-color;\n    }\n    \n    .p-sidebar-visible {\n        display: flex;\n    }\n    \n    .p-sidebar-mask.p-component-overlay {\n        pointer-events: auto;\n    }\n    \n    .p-sidebar {\n        display: flex;\n        flex-direction: column;\n        pointer-events: auto;\n        transform: translate3d(0px, 0px, 0px);\n        position: relative;\n    }\n    \n    .p-sidebar-content {\n        overflow-y: auto;\n        flex-grow: 1;\n    }\n    \n    .p-sidebar-header {\n        display: flex;\n        align-items: center;\n        justify-content: flex-end;\n    }\n    \n    .p-sidebar-custom-header {\n        justify-content: space-between;\n    }\n    \n    .p-sidebar-icons {\n        display: flex;\n        align-items: center;\n        flex-shrink: 0;\n    }\n    \n    .p-sidebar-icon {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        overflow: hidden;\n        position: relative;\n    }\n    \n    .p-sidebar-full .p-sidebar {\n        transition: none;\n        transform: none;\n        width: 100vw !important;\n        height: 100vh !important;\n        max-height: 100%;\n        top: 0px !important;\n        left: 0px !important;\n    }\n    \n    /* Animation */\n    /* Top, Bottom, Left and Right */\n    .p-sidebar-top .p-sidebar-enter,\n    .p-sidebar-top .p-sidebar-exit-active {\n        transform: translate3d(0px, -100%, 0px);\n    }\n    \n    .p-sidebar-bottom .p-sidebar-enter,\n    .p-sidebar-bottom .p-sidebar-exit-active {\n        transform: translate3d(0px, 100%, 0px);\n    }\n    \n    .p-sidebar-left .p-sidebar-enter,\n    .p-sidebar-left .p-sidebar-exit-active {\n        transform: translate3d(-100%, 0px, 0px);\n    }\n    \n    .p-sidebar-right .p-sidebar-enter,\n    .p-sidebar-right .p-sidebar-exit-active {\n        transform: translate3d(100%, 0px, 0px);\n    }\n    \n    .p-sidebar-top .p-sidebar-enter-active,\n    .p-sidebar-bottom .p-sidebar-enter-active,\n    .p-sidebar-left .p-sidebar-enter-active,\n    .p-sidebar-right .p-sidebar-enter-active {\n        transform: translate3d(0px, 0px, 0px);\n        transition: all 0.3s;\n    }\n    \n    .p-sidebar-top .p-sidebar-enter-done,\n    .p-sidebar-bottom .p-sidebar-enter-done,\n    .p-sidebar-left .p-sidebar-enter-done,\n    .p-sidebar-right .p-sidebar-enter-done {\n        transform: none;\n    }\n    \n    .p-sidebar-top .p-sidebar-exit-active,\n    .p-sidebar-bottom .p-sidebar-exit-active,\n    .p-sidebar-left .p-sidebar-exit-active,\n    .p-sidebar-right .p-sidebar-exit-active {\n        transition: all 0.3s;\n    }\n    \n    /* Full */\n    .p-sidebar-full .p-sidebar-enter {\n        opacity: 0;\n        transform: scale(0.5);\n    }\n    \n    .p-sidebar-full .p-sidebar-enter-active {\n        opacity: 1;\n        transform: scale(1);\n        transition: all 0.15s cubic-bezier(0, 0, 0.2, 1);\n    }\n    \n    .p-sidebar-full .p-sidebar-enter-done {\n        transform: none;\n    }\n    \n    .p-sidebar-full .p-sidebar-exit-active {\n        opacity: 0;\n        transform: scale(0.5);\n        transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);\n    }\n    \n    /* Size */\n    .p-sidebar-left .p-sidebar {\n        width: 20rem;\n        height: 100%;\n    }\n    \n    .p-sidebar-right .p-sidebar {\n        width: 20rem;\n        height: 100%;\n    }\n    \n    .p-sidebar-top .p-sidebar {\n        height: 10rem;\n        width: 100%;\n    }\n    \n    .p-sidebar-bottom .p-sidebar {\n        height: 10rem;\n        width: 100%;\n    }\n    \n    .p-sidebar-left .p-sidebar-sm,\n    .p-sidebar-right .p-sidebar-sm {\n        width: 20rem;\n    }\n    \n    .p-sidebar-left .p-sidebar-md,\n    .p-sidebar-right .p-sidebar-md {\n        width: 40rem;\n    }\n    \n    .p-sidebar-left .p-sidebar-lg,\n    .p-sidebar-right .p-sidebar-lg {\n        width: 60rem;\n    }\n    \n    .p-sidebar-top .p-sidebar-sm,\n    .p-sidebar-bottom .p-sidebar-sm {\n        height: 10rem;\n    }\n    \n    .p-sidebar-top .p-sidebar-md,\n    .p-sidebar-bottom .p-sidebar-md {\n        height: 20rem;\n    }\n    \n    .p-sidebar-top .p-sidebar-lg,\n    .p-sidebar-bottom .p-sidebar-lg {\n        height: 30rem;\n    }\n    \n    .p-sidebar-left .p-sidebar-view,\n    .p-sidebar-right .p-sidebar-view,\n    .p-sidebar-top .p-sidebar-view,\n    .p-sidebar-bottom .p-sidebar-view {\n        width: 100%;\n        height: 100%;\n    }\n    \n    .p-sidebar-left .p-sidebar-content,\n    .p-sidebar-right .p-sidebar-content,\n    .p-sidebar-top .p-sidebar-content,\n    .p-sidebar-bottom .p-sidebar-content {\n        width: 100%;\n        height: 100%;\n    }\n    \n    @media screen and (max-width: 64em) {\n        .p-sidebar-left .p-sidebar-lg,\n        .p-sidebar-left .p-sidebar-md,\n        .p-sidebar-right .p-sidebar-lg,\n        .p-sidebar-right .p-sidebar-md {\n            width: 20rem;\n        }\n    }        \n}\n",inlineStyles:{mask:function(e){var n=e.props;return{position:"fixed",height:"100%",width:"100%",left:0,top:0,display:"flex",justifyContent:"left"===n.position?"flex-start":"right"===n.position?"flex-end":"center",alignItems:"top"===n.position?"flex-start":"bottom"===n.position?"flex-end":"center"}}}}}),R=function(n){var t=e.useRef(void 0);return e.useEffect((function(){t.current=n})),t.current},T=function(n,t,r){var i,o,a,s,l,p,c,d,u,b,m,h,y,g,x,w=(s=void 0===(a=(i={type:"keydown",listener:function(e){"Esc"!==e.key&&"Escape"!==e.key||(e.stopImmediatePropagation(),r(e))}}).target)?"document":a,l=i.type,p=i.listener,c=i.options,u=void 0===(d=i.when)||d,b=e.useRef(null),m=e.useRef(null),h=R(p),y=R(c),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v.isNotEmpty(e.target)&&(x(),(e.when||u)&&(b.current=f.getTargetElement(e.target))),!m.current&&b.current&&(m.current=function(e){return p&&p(e)},b.current.addEventListener(l,m.current,c))},x=function(){m.current&&(b.current.removeEventListener(l,m.current,c),m.current=null)},e.useEffect((function(){u?b.current=f.getTargetElement(s):(x(),b.current=null)}),[s,u]),e.useEffect((function(){!m.current||""+h==""+p&&y===c||(x(),u&&g())}),[p,c,u]),o=function(){x()},e.useEffect((function(){return o}),[]),[g,x]),S=C(w,2),E=S[0],O=S[1];return e.useEffect((function(){if(t&&n.current)return E(),function(){O()}})),[n,r]};function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){var r,i,o;r=e,o=t[n],(i=E(i=n))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L=e.forwardRef((function(i,m){var w=e.useContext(t),S=N.getProps(i,w),E=C(e.useState(!1),2),O=E[0],k=E[1],j=C(e.useState(!1),2),I=j[0],P=j[1],R=N.setMetaData({props:S,state:{containerVisible:O}}),A=R.ptm,L=R.cx,Z=R.sx;o(N.css.styles,R.isUnstyled,{name:"sidebar"});var z=e.useRef(null),B=e.useRef(null),M=e.useRef(null);T(B,S.closeOnEscape,(function(e){h.get(B.current)===h.getCurrent("modal",w&&w.autoZIndex||n.autoZIndex)&&X(e)}));var H=C(s({type:"click",listener:function(e){0===e.button&&V(e)&&X(e)}}),2),J=H[0],U=H[1],V=function(e){return z&&z.current&&!z.current.contains(e.target)},X=function(e){S.onHide(),e.preventDefault()},_=function(){var e;S.onShow&&S.onShow(),!((e=document.activeElement)&&z&&z.current.contains(e))&&S.showCloseIcon&&M.current.focus(),Y()},F=function(){S.modal&&f.addClass(B.current,"p-component-overlay-leave")},W=function(){h.clear(B.current),k(!1),$()},Y=function(){S.dismissable&&!S.modal&&J(),S.blockScroll&&(f.addClass(document.body,"p-overflow-hidden"),document.body.style.setProperty("--scrollbar-width",f.calculateScrollbarWidth()+"px"))},$=function(){U(),S.blockScroll&&(f.removeClass(document.body,"p-overflow-hidden"),document.body.style.removeProperty("--scrollbar-width"))};e.useImperativeHandle(m,(function(){return{props:S,getElement:function(){return z.current},gteMask:function(){return B.current},getCloseIcon:function(){return M.current}}})),l((function(){S.visible&&k(!0)})),p((function(){S.visible&&!O&&k(!0),S.visible!==I&&O&&P(S.visible)})),p((function(){O&&(h.set("modal",B.current,w&&w.autoZIndex||n.autoZIndex,S.baseZIndex||w&&w.zIndex.modal||n.zIndex.modal),P(!0))}),[O]),p((function(){I&&(U(),S.dismissable&&!S.modal&&J())}),[S.dismissable,S.modal,I]),c((function(){$(),B.current&&h.clear(B.current)}));var q,G,K,Q,ee,ne,te,re,ie,oe,ae,se=function(){var n=y({type:"button",ref:M,className:L("closeButton"),onClick:function(e){return X(e)},"aria-label":o},A("closeButton")),t=y({className:L("closeIcon")},A("closeIcon")),i=g.getJSXIcon(S.closeIcon||e.createElement(d,t),D({},t),{props:S}),o=S.ariaCloseLabel||r("close");return S.showCloseIcon?e.createElement("button",n,i,e.createElement(b,null)):null};return O&&(q=se(),G=S.icons?v.getJSXElement(S.icons,S):null,K=S.header?v.getJSXElement(S.header,S):null,Q={enter:S.fullScreen?150:300,exit:S.fullScreen?150:300},ee=y({ref:B,style:Z("mask"),className:L("mask",{maskVisibleState:O}),onMouseDown:function(e){return n=e,void(S.dismissable&&S.modal&&B.current===n.target&&X(n));var n}},A("mask")),ne=y({id:S.id,className:L("root",{context:w}),style:S.style,role:"complementary"},N.getOtherProps(S),A("root")),te=y({className:L("header")},A("header")),re=y({className:L("content")},A("content")),ie=y({className:L("icons")},A("icons")),oe=y({classNames:L("transition"),in:I,timeout:Q,options:S.transitionOptions,unmountOnExit:!0,onEntered:_,onExiting:F,onExited:W},A("transition")),ae=e.createElement("div",ee,e.createElement(a,x({nodeRef:z},oe),e.createElement("div",x({ref:z},ne),e.createElement("div",te,K,e.createElement("div",ie,G,q)),e.createElement("div",re,S.children)))),e.createElement(u,{element:ae,appendTo:S.appendTo,visible:!0}))}));L.displayName="Sidebar";export{L as Sidebar};
