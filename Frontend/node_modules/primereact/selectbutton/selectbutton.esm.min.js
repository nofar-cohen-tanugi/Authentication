import*as e from"react";import{Tooltip as t}from"primereact/tooltip";import{classNames as n,mergeProps as o,ObjectUtils as l,DomHandler as r}from"primereact/utils";import{ComponentBase as a}from"primereact/componentbase";import{Ripple as i}from"primereact/ripple";import{PrimeReactContext as u}from"primereact/api";function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(this,arguments)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e){if(Array.isArray(e))return c(e)}function m(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){return p(e)||m(e)||d(e)||f()}var v=a.extend({defaultProps:{__TYPE:"SelectButton",id:null,value:null,options:null,optionLabel:null,optionValue:null,optionDisabled:null,tabIndex:null,multiple:!1,unselectable:!0,disabled:!1,style:null,className:null,dataKey:null,tooltip:null,tooltipOptions:null,itemTemplate:null,onChange:null,children:void 0},css:{classes:{root:function(e){return n("p-selectbutton p-buttonset p-component",e.props.className)},button:function(e){var t=e.itemProps;return n("p-button p-component",{"p-highlight":t.selected,"p-disabled":t.disabled,"p-focus":e.focusedState})},label:"p-button-label p-c"}}});function y(e){if(Array.isArray(e))return e}function g(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,l,r,a,i=[],u=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(o=r.call(n)).done)&&(i.push(o.value),i.length!==t);u=!0);}catch(e){s=!0,l=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw l}}return i}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var E=e.memo((function(t){var r,a,u,s=e.useState(!1),c=(a=2,y(r=s)||g(r,a)||d(r,a)||h()),p=c[0],m=c[1],f=t.ptm,b=t.cx,v=function(e){return f(e,{hostName:t.hostName,context:{selected:t.selected,disabled:t.disabled,option:t.option}})},E=function(e){t.onClick&&t.onClick({originalEvent:e,option:t.option})},S=(u=o({className:b("label")},v("label")),t.template?l.getJSXElement(t.template,t.option):e.createElement("span",u,t.label)),N=o({className:n(t.className,b("button",{itemProps:t,focusedState:p})),role:"button","aria-label":t.label,"aria-pressed":t.selected,onClick:E,onKeyDown:function(e){32===e.which&&(E(e),e.preventDefault())},tabIndex:t.tabIndex,onFocus:function(){m(!0)},onBlur:function(){m(!1)}},v("button"));return e.createElement("div",N,S,!t.disabled&&e.createElement(i,null))}));E.displayName="SelectButtonItem";var S=e.memo(e.forwardRef((function(n,a){var i=e.useContext(u),c=v.getProps(n,i),p=e.useRef(null),m=v.setMetaData({props:c}),d=m.ptm,f=m.cx,y=function(e){if(!c.disabled&&!S(e.option)){var t=N(e.option);if(!t||c.unselectable){var n,o=h(e.option);if(c.multiple){var r=c.value?b(c.value):[];n=t?r.filter((function(e){return!l.equals(e,o,c.dataKey)})):[].concat(b(r),[o])}else n=t?null:o;c.onChange&&c.onChange({originalEvent:e.originalEvent,value:n,stopPropagation:function(){e.originalEvent.stopPropagation()},preventDefault:function(){e.originalEvent.preventDefault()},target:{name:c.name,id:c.id,value:n}})}}},g=function(e){return c.optionLabel?l.resolveFieldData(e,c.optionLabel):e&&void 0!==e.label?e.label:e},h=function(e){return c.optionValue?l.resolveFieldData(e,c.optionValue):e&&void 0!==e.value?e.value:e},S=function(e){return c.optionDisabled?l.isFunction(c.optionDisabled)?c.optionDisabled(e):l.resolveFieldData(e,c.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled},N=function(e){var t=h(e);return c.multiple?!(!c.value||!c.value.length)&&c.value.some((function(e){return l.equals(e,t,c.dataKey)})):l.equals(c.value,t,c.dataKey)};e.useImperativeHandle(a,(function(){return{props:c,focus:function(){return r.focusFirstElement(p.current)},getElement:function(){return p.current}}}));var D=l.isNotEmpty(c.tooltip),x=c.options&&c.options.length?c.options.map((function(t,n){var o=c.disabled||S(t),l=g(t),r=o?null:0,a=N(t);return e.createElement(E,{hostName:"SelectButton",key:l+"_"+n,label:l,className:t.className,option:t,onClick:y,template:c.itemTemplate,selected:a,tabIndex:r,disabled:o,ptm:d,cx:f})})):null,I=o({ref:p,id:c.id,className:f("root"),style:c.style,role:"group"},v.getOtherProps(c),d("root"));return e.createElement(e.Fragment,null,e.createElement("div",I,x),D&&e.createElement(t,s({target:p,content:c.tooltip},c.tooltipOptions,{pt:d("tooltip")})))})));S.displayName="SelectButton";export{S as SelectButton};
